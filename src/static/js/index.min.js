(()=>{"use strict";const t={Home:{template:"\n\t\t<h1>Welcome to Microboard!</h1>\n\t"},Menu:{data:()=>({active:"/"}),template:'\n\t\t<el-menu router="true" :default-active="active">\n\t\t\t<el-menu-item index="/">\n\t\t\t\t<el-icon><house /></el-icon>\n\t\t\t\t首页\n\t\t\t</el-menu-item>\n\t\t\t<el-menu-item index="/groups">\n\t\t\t\t<el-icon><connection /></el-icon>\n\t\t\t\t群组\n\t\t\t</el-menu-item>\n\t\t\t<el-menu-item index="/friends">\n\t\t\t\t<el-icon><avatar /></el-icon>\n\t\t\t\t好友\n\t\t\t</el-menu-item>\n\t\t\t<el-sub-menu>\n\t\t\t\t<template #title>\n\t\t\t\t\t<el-icon><setting /></el-icon>\n\t\t\t\t\t<span>设置</span>\n\t\t\t\t</template>\n\t\t\t\t<el-menu-item index="/home" @click="logout">\n\t\t\t\t\t<el-icon><switch-button /></el-icon>\n\t\t\t\t\t登出\n\t\t\t\t</el-form-item>\n\t\t\t</el-sub-menu>\n\t\t</el-menu>\n\t',methods:{logout(){this.$emit("logout")}}},Login:{props:{need:Boolean},template:'\n\t\t\x3c!-- 登录对话框 --\x3e\n\t\t<el-dialog\n\t\t\tv-model="need"\n\t\t\ttitle="登录"\n\t\t\t:before-close="closeLoginDialog"\n\t\t\tdraggable="true"\n\t\t\twidth="60%"\n\t\t>\n\t\t\t<el-form :model="loginform" label-width="80px">\n\t\t\t\t<el-form-item label="用户名">\n\t\t\t\t\t<el-input v-model="loginform.username" />\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label="密码">\n\t\t\t\t\t<el-input v-model="loginform.password" show-password />\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-button type="primary" @click="submitLogin">登录</el-button>\n\t\t\t\t\t<el-button @click="showRegister">注册</el-button>\n\t\t\t\t</el-menu-item>\n\t\t\t</el-form>\n\n\t\t\t\x3c!-- 注册对话框 --\x3e\n\t\t\t<el-dialog\n\t\t\t\tv-model="registering"\n\t\t\t\ttitle="注册"\n\t\t\t\tdraggable="true"\n\t\t\t\twidth="45%"\n\t\t\t>\n\t\t\t\t<el-form :model="registerform" label-width="80px">\n\t\t\t\t\t<el-form-item label="用户名">\n\t\t\t\t\t\t<el-input v-model="registerform.username" />\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label="密码">\n\t\t\t\t\t\t<el-input v-model="registerform.password1" show-password />\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label="确认密码">\n\t\t\t\t\t\t<el-input v-model="registerform.password2" show-password />\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t<el-button type="primary" @click="submitRegister">注册</el-button>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n\t\t\t</el-dialog>\n\t\t</el-dialog>\n\t',data:()=>({loginform:{username:"",password:""},registering:!1,registerform:{username:"",password1:"",password2:""}}),methods:{closeLoginDialog(){ElementPlus.ElMessage({type:"warning",message:"请先登录！",showClose:!0,center:!0,duration:1800})},showRegister(){this.registering=!0},submitLogin(){this.$emit("login",this.loginform)},submitRegister(){let t=this.registerform;t.password1===t.password2?this.$emit("register",{username:t.username,password:t.password1}):ElementPlus.ElNotification({type:"error",title:"错误",message:"两次密码不一致！"})}}},NotFound:{template:'\n\t\t<img class="not-found" src="https://cdn.jsdelivr.net/gh/pratik23rj/404_page@master/error.svg"></img>\n\t'}},e=[{path:"/",redirect:"/home"},{path:"/home",component:t.Home},{path:"/:path(.*)*",component:t.NotFound}];let o=io;(window||globalThis).app=function(n){var s=o();s.connect();var i=VueRouter.createRouter({history:VueRouter.createWebHashHistory(),routes:e}),l=Vue.createApp({data:()=>({logined:!0,user:null}),mounted(){this.checkLogined()},methods:{checkLogined(){this?.io?.get("username")&&this?.io?.get("password")?this.logined=!0:void 0!==(Cookies.get("username")&&Cookies.get("password"))?this.login({username:Cookies.get("username"),password:Cookies.get("password")}):this.logined=!1},login(t){s.once("message",(e=>{200===e.code?(ElementPlus.ElNotification({type:"success",title:"提示",message:e.message}),this.logined=!0,Cookies.set("username",t.username,{expires:15}),Cookies.set("password",t.password,{expires:15}),this.user={username:t.username,password:t.password}):ElementPlus.ElNotification({type:"error",title:"错误",message:e.message})})),s.emit("login",t)},register(t){s.once("message",(e=>{200===e.code?(ElementPlus.ElNotification({type:"success",title:"提示",message:e.message}),this.login(t)):ElementPlus.ElNotification({type:"error",title:"错误",message:e.message})})),s.emit("register",t)},logout(){Cookies.remove("username"),Cookies.remove("password"),this.logined=!1,this.user=null,s.emit("logout"),setTimeout((()=>{ElementPlus.ElNotification({type:"success",message:"登出成功！",title:"提示",duration:1500})}),80)}},components:{"mb-menu":t.Menu,"mb-login":t.Login}});l.io=s,l.use(i),l.use(ElementPlus);for(const[t,e]of Object.entries(ElementPlusIconsVue))l.component(t,e);return l.mount("#app"),l}()})();